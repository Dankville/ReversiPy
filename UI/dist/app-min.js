const SPA=(e=>{"use strict";let a,o,i,s;a=(a=>{o=e(a),e("#game-toggle").on("click",()=>{t()})});let t=()=>{let a=SPA.ResponseModule.getPlayerToken,t=SPA.ResponseModule.joinGame;a().then(e=>s=e.playerToken).then(e=>t(e)).then(a=>{a.gameColumns,a.gameGrid,a.gameToken;i=e('<div id="reversi-board-container">'),o.append(i),console.log(i)}).catch(e=>console.error(new Error(e)))};return{init:a}})($);SPA.GameModule=(e=>{"use strict";let a,o,i,s,t,l,n,d,r=[];a=((a,o,c)=>{d=o,s=c,i=a;for(let e=0;e<s.length;e++)r.push([]);l=e('<div id="row-info">'),n=e('<div id="col-info">'),t=e('<div id="reversi-board">'),s.forEach((a,o)=>{const i=o+1;e(l).append('<div class="row-info-cell"> <span>'+i+"</span> </div>"),a.forEach((a,l)=>{const n=d[l],c=s[o][l],f=e('<div data-row="'+i+'" data-col="'+n+'" data-played='+c+' class="reversi-field"></div>');0!=c&&f.append(p()),r[o].push(f),e(t).append(f)})}),d.forEach(a=>{e(n).append('<div class="col-info-cell">'+a+"</div>")}),e(i).append(l),e(i).append(t),e(i).append(n)}),o=(e=>{let a=0;e.forEach(e=>{let o=0;e.forEach(e=>{const i=e,t=s[a][o];i!=t&&(0==t&&r[a][o].append(p()),r[a][o].attr("data-played",i)),o++}),a++}),s=e});let p=()=>e('<div class="fiche"></div>');return{init:a,updateGrid:o,test:()=>{console.log("test")}}})($),SPA.ResponseModule=(e=>{"use strict";let a,o,i,s,t,l="http://localhost:5001";return{move:a=((a,o,i,s)=>new Promise((t,n)=>e.ajax({url:l+"/api/Spel/Zet",method:"PUT",data:JSON.stringify({moveType:a,col:o,row:i,playerToken:s}),success:e=>{t(e)},failed:e=>{n("failed")}}))),getGameInfo:o=((a=0)=>new Promise((o,i)=>e.ajax(l+"/api/Spel/"+a,{success:e=>{o(e)},failed:e=>{i("failed")}}))),getPlayerToken:i=(()=>new Promise((a,o)=>e.ajax(l+"/api/Spel/GetPlayerToken",{method:"GET",success:e=>{a(e)},failed:e=>{o("failed")}}))),joinGame:s=(a=>new Promise((o,i)=>e.ajax(l+"/api/Spel/JoinGame/"+a,{method:"GET",success:e=>{o(e)},failed:e=>{i("failed")}}))),subscribe:t=((e,a)=>{new EventSource(l+"/api/Spel/Event/"+e).onmessage=(e=>{if("1"!=e.data){let o=e.data.split("'")[1],i=JSON.parse(o);a(i)}})})}})($);